<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KITCHE STUDIOS | Visual Architects</title>
    
    <script src="https://js.paystack.co/v1/inline.js"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@400;700&family=Manrope:wght@300;400;600&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8406033028217212"
     crossorigin="anonymous"></script>
    <style>
        /* =========================================
           STYLE ENGINE
           ========================================= */
        :root {
            --bg: #050505;
            --panel: #111;
            --text-main: #f0f0f0;
            --gold: #D4AF37;
            --border: #222;
            --green: #00e676;
            --red: #ff3d00;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; outline: none; }
        
        body {
            background-color: var(--bg);
            color: var(--text-main);
            font-family: 'Manrope', sans-serif;
            overflow-x: hidden;
        }

        h1, h2, h3 { font-family: 'Cinzel', serif; }
        .mono { font-family: 'Space Mono', monospace; letter-spacing: 1px; }
        .text-gold { color: var(--gold); }
        .hidden { display: none !important; }

        /* BUTTONS */
        .btn {
            padding: 15px 30px;
            background: transparent;
            border: 1px solid var(--gold);
            color: var(--gold);
            font-family: 'Space Mono', monospace;
            cursor: pointer;
            text-transform: uppercase;
            font-weight: 700;
            transition: 0.3s;
            display: inline-flex; align-items: center; justify-content: center; gap: 10px;
        }
        .btn:hover { background: var(--gold); color: black; box-shadow: 0 0 20px rgba(212, 175, 55, 0.4); }
        .btn-solid { background: var(--gold); color: black; }

        /* NAV */
        nav {
            padding: 20px 5%;
            border-bottom: 1px solid var(--border);
            display: flex; justify-content: space-between; align-items: center;
            background: rgba(5,5,5,0.95); position: sticky; top: 0; z-index: 100;
        }
        .logo-img { height: 50px; width: auto; object-fit: contain; }

        /* HERO */
        .hero {
            min-height: 80vh;
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            text-align: center;
            background: radial-gradient(circle at center, #1a1a1a 0%, #050505 70%);
            padding: 20px;
        }
        .hero h1 { font-size: clamp(2.5rem, 6vw, 5rem); line-height: 1.1; margin-bottom: 20px; }

        /* PUBLIC GALLERY */
        .portfolio-grid {
            display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1px;
            border-top: 1px solid var(--border);
        }
        .p-item {
            height: 400px; position: relative; overflow: hidden; border: 1px solid #222;
        }
        .p-item img { width: 100%; height: 100%; object-fit: cover; transition: 0.5s; }
        .p-item:hover img { transform: scale(1.1); }
        .p-overlay {
            position: absolute; bottom: 0; left: 0; width: 100%; padding: 20px;
            background: linear-gradient(to top, black, transparent); opacity: 0; transition: 0.3s;
        }
        .p-item:hover .p-overlay { opacity: 1; }

        /* CLIENT PORTAL */
        .portal-section { padding: 100px 20px; border-top: 1px solid var(--border); }
        .login-box {
            max-width: 600px; margin: 0 auto; text-align: center;
            padding: 60px 20px; border: 1px solid var(--border); background: #0a0a0a;
        }
        .code-input {
            background: transparent; border: none; border-bottom: 2px solid #333;
            color: var(--gold); font-size: 2rem; text-align: center; width: 100%; max-width: 300px;
            margin: 30px 0; font-family: 'Cinzel', serif;
        }

        /* DASHBOARD */
        .dashboard { max-width: 900px; margin: 0 auto; border: 1px solid var(--border); background: #111; }
        .dash-header {
            padding: 30px; border-bottom: 1px solid var(--border);
            display: flex; justify-content: space-between; align-items: flex-end;
        }
        .dash-body { padding: 50px 20px; text-align: center; }

        /* DRIVE BUTTON */
        .drive-btn {
            background: #1a1a1a; color: white; padding: 25px;
            border: 1px solid #333; margin: 0 auto; max-width: 450px;
            display: flex; align-items: center; justify-content: center; gap: 15px;
            cursor: pointer; transition: 0.3s;
        }
        .drive-btn:hover { border-color: var(--gold); background: #222; }

        /* ADMIN */
        #admin-panel {
            position: fixed; top: 0; right: -100%; width: 100%; max-width: 400px; height: 100%;
            background: #0f0f0f; border-left: 1px solid var(--gold); z-index: 9999;
            padding: 40px; transition: 0.4s; overflow-y: auto;
        }
        #admin-panel.open { right: 0; }
        .admin-input { width: 100%; padding: 12px; background: #000; border: 1px solid #333; color: white; margin-bottom: 10px; }

        /* RECEIPT MODAL */
        .receipt-modal {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.9); z-index: 2000;
            display: none; align-items: center; justify-content: center;
        }
        .receipt-paper {
            background: white; color: black; padding: 40px; width: 90%; max-width: 400px;
            font-family: 'Space Mono', monospace; text-align: center;
        }

        /* PRINT */
        @media print {
            body * { visibility: hidden; }
            .receipt-paper, .receipt-paper * { visibility: visible; }
            .receipt-modal { position: absolute; left: 0; top: 0; background: white; }
            .receipt-paper { width: 100%; max-width: none; box-shadow: none; }
            .no-print { display: none; }
        }
    </style>
</head>
<body>

    <nav>
        <img src="KS NEW LOGO.png" alt="KITCHE" class="logo-img">
        <div style="display:flex; gap:15px;">
            <a href="#portfolio" class="btn" style="font-size:0.8rem; padding:10px 20px;">Portfolio</a>
            <a href="#portal" class="btn" style="font-size:0.8rem; padding:10px 20px;">Client Login</a>
        </div>
    </nav>

    <header class="hero">
        <h1 class="text-gold">VISUAL<br>ARCHITECTS</h1>
        <p class="mono" style="color:#888; margin-bottom:40px;">NIGERIA / GLOBAL</p>
        <a href="#portal" class="btn btn-solid">Access Project</a>
    </header>

    <section id="portfolio" style="padding: 60px 20px; text-align: center;">
        <h2 class="text-gold" style="margin-bottom: 10px;">SELECTED WORKS</h2>
        <p class="mono" style="margin-bottom: 40px; font-size: 0.8rem; color: #666;">PUBLIC SHOWCASE</p>
        
        <div class="portfolio-grid">
            <div class="p-item"><img src="https://images.unsplash.com/photo-1550614000-4b9519e02a48?w=800&q=80" loading="lazy"></div>
            <div class="p-item"><img src="https://images.unsplash.com/photo-1515934751635-c81c6bc9a2d8?w=800&q=80" loading="lazy"></div>
            <div class="p-item"><img src="https://images.unsplash.com/photo-1619983081563-430f63602796?w=800&q=80" loading="lazy"></div>
            <div class="p-item"><img src="https://images.unsplash.com/photo-1600607686527-6fb886090705?w=800&q=80" loading="lazy"></div>
        </div>
    </section>

    <section id="portal" class="portal-section">
        <div id="login-view" class="login-box">
            <h2 class="text-gold">CLIENT VAULT</h2>
            <input type="password" id="access-code" class="code-input" placeholder="ENTER ACCESS CODE">
            <br>
            <button class="btn" onclick="App.login()">ENTER VAULT</button>
            <p id="login-error" class="mono" style="color:var(--red); margin-top:20px; display:none;">INVALID ACCESS CODE</p>
        </div>

        <div id="dashboard-view" class="dashboard hidden">
            <div class="dash-header">
                <div>
                    <div class="mono" style="color:#666; font-size:0.7rem;">PROJECT NAME</div>
                    <h2 id="dash-name">Wedding 2024</h2>
                </div>
                <div style="text-align: right;">
                    <div class="mono" style="color:#666; font-size:0.7rem;">STATUS</div>
                    <div id="dash-status" class="mono" style="color:var(--red); font-weight:bold;">UNPAID</div>
                    <div id="dash-price" class="text-gold" style="font-size:1.5rem;">₦0</div>
                </div>
            </div>

            <div class="dash-body">
                
                <div id="pay-step">
                    <h3 style="margin-bottom:20px;">Gallery Locked</h3>
                    <p class="mono" style="color:#888; margin-bottom:30px; max-width:400px; margin-left:auto; margin-right:auto;">
                        Payment is required to unlock your Google Drive link containing all high-resolution assets.
                    </p>
                    
                    <button class="btn btn-solid" onclick="App.pay()">PAY NOW SECURELY</button>
                    
                    <div style="margin-top:20px;">
                        <img src="https://upload.wikimedia.org/wikipedia/commons/1/1f/Paystack.png" width="100" style="filter: grayscale(1); opacity: 0.5;">
                    </div>
                </div>

                <div id="drive-step" class="hidden">
                    <h3 class="text-gold" style="margin-bottom:20px;">ACCESS GRANTED</h3>
                    
                    <div class="drive-btn" onclick="App.openDrive()">
                        <svg width="30" height="30" viewBox="0 0 87.3 78"><path d="m6.6 66.85 3.85 6.65c.8 1.4 1.95 2.5 3.3 3.3l13.75-23.8h-27.5c0 1.55.4 3.1 1.2 4.5z" fill="#0066da"/><path d="m43.65 25-13.75-23.8c-1.35.8-2.5 1.9-3.3 3.3l-25.4 44a9.06 9.06 0 0 0 -1.2 4.5h27.5z" fill="#00ac47"/><path d="m73.55 76.8c1.35-.8 2.5-1.9 3.3-3.3l1.6-2.75 7.65-13.25c.8-1.4 1.2-2.95 1.2-4.5h-27.502l5.852 11.5z" fill="#ea4335"/><path d="m43.65 25 13.75-23.8c-1.35-.8-2.9-1.2-4.5-1.2h-18.5c-1.6 0-3.15.45-4.5 1.2z" fill="#00832d"/><path d="m59.8 53h-27.5l-13.75 23.8c1.35.8 2.9 1.2 4.5 1.2h50.5c1.6 0 3.15-.45 4.5-1.2z" fill="#2684fc"/><path d="m73.4 26.5-12.7-22c-.8-1.4-1.95-2.5-3.3-3.3l-13.75 23.8 27.5 47.6c1.35-.8 2.5-1.9 3.3-3.3l1.6-2.75z" fill="#ffba00"/></svg>
                        <span class="mono" style="font-weight:700;">OPEN GOOGLE DRIVE</span>
                    </div>

                    <p class="mono" style="font-size:0.7rem; color:#666; margin-top:15px; margin-bottom: 30px;">
                        Click above to view your photos.
                    </p>

                    <button class="btn" onclick="App.showReceipt()">PRINT RECEIPT</button>
                </div>

            </div>
        </div>
    </section>

    <div id="admin-panel">
        <h2 class="text-gold" style="margin-bottom:20px;">ADMIN</h2>
        
        <div id="admin-login-ui">
            <input type="password" id="admin-pass" class="admin-input" placeholder="Password">
            <button class="btn" onclick="Admin.auth()">LOGIN</button>
        </div>

        <div id="admin-main-ui" class="hidden">
            <h3 class="mono" style="color:white; margin-bottom:10px;">Create Project</h3>
            
            <label class="mono text-gold" style="font-size:0.7rem;">CLIENT NAME</label>
            <input type="text" id="new-name" class="admin-input" placeholder="e.g. David Wedding">

            <label class="mono text-gold" style="font-size:0.7rem;">ACCESS CODE</label>
            <input type="text" id="new-code" class="admin-input" placeholder="e.g. DAVID2026">

            <label class="mono text-gold" style="font-size:0.7rem;">PRICE (NAIRA)</label>
            <input type="number" id="new-price" class="admin-input" placeholder="e.g. 150000">

            <label class="mono text-gold" style="font-size:0.7rem;">GOOGLE DRIVE LINK</label>
            <input type="text" id="new-link" class="admin-input" placeholder="https://drive.google.com/...">

            <button class="btn btn-solid" style="width:100%; margin-top:10px;" onclick="Admin.create()">CREATE PROJECT</button>

            <hr style="border-color:#333; margin:30px 0;">

            <div id="project-list"></div>

            <button class="btn" style="width:100%; margin-top:20px; border-color:#333; color:#666;" onclick="Admin.close()">CLOSE</button>
        </div>
    </div>

    <div id="receipt-modal" class="receipt-modal">
        <div class="receipt-paper">
            <h2 style="font-family:'Cinzel'; margin-bottom:5px;">KITCHE STUDIOS</h2>
            <div class="mono" style="font-size:0.7rem;">OFFICIAL RECEIPT</div>
            <hr style="border:1px dashed #ccc; margin:20px 0;">
            
            <div style="text-align:left;">
                <p class="mono" style="margin-bottom:5px;">DATE: <span id="rec-date"></span></p>
                <p class="mono" style="margin-bottom:5px;">PROJECT: <span id="rec-name"></span></p>
                <p class="mono" style="margin-bottom:5px;">REF: <span id="rec-ref"></span></p>
            </div>

            <hr style="border:1px dashed #ccc; margin:20px 0;">

            <div style="display:flex; justify-content:space-between;">
                <span class="mono" style="font-weight:bold;">TOTAL PAID:</span>
                <span class="mono" style="font-weight:bold; font-size:1.2rem;" id="rec-amount"></span>
            </div>

            <div class="no-print" style="margin-top:30px;">
                <button class="btn btn-solid" style="padding:10px 20px;" onclick="window.print()">PRINT</button>
                <button class="btn" style="padding:10px 20px; border:none;" onclick="document.getElementById('receipt-modal').style.display='none'">CLOSE</button>
            </div>
        </div>
    </div>

    <footer style="text-align:center; padding:40px; border-top:1px solid #111;">
        <span class="mono" style="cursor:pointer; font-size:0.8rem; color:#444;" onclick="Admin.open()">STAFF LOGIN</span>
    </footer>

    <script>
        const KEY = 'pk_live_8f50c14977db8dc890c79ceac540071e3035faf4'; // YOUR LIVE KEY
        const DB_NAME = 'kitche_db_final_v1';

        // Load DB
        let projects = JSON.parse(localStorage.getItem(DB_NAME) || '[]');
        let activeProj = null;

        // --- APP LOGIC ---
        const App = {
            login: () => {
                const code = document.getElementById('access-code').value;
                const found = projects.find(p => p.code === code);
                if(found) {
                    activeProj = found;
                    App.loadDash();
                } else {
                    document.getElementById('login-error').style.display = 'block';
                }
            },

            loadDash: () => {
                document.getElementById('login-view').classList.add('hidden');
                document.getElementById('dashboard-view').classList.remove('hidden');
                document.getElementById('dash-name').innerText = activeProj.name;
                document.getElementById('dash-price').innerText = '₦' + parseInt(activeProj.price).toLocaleString();
                App.updateStatus();
            },

            updateStatus: () => {
                const status = document.getElementById('dash-status');
                const payStep = document.getElementById('pay-step');
                const driveStep = document.getElementById('drive-step');

                if(activeProj.paid) {
                    status.innerText = "PAID IN FULL";
                    status.style.color = "var(--green)";
                    payStep.classList.add('hidden');
                    driveStep.classList.remove('hidden');
                } else {
                    status.innerText = "UNPAID";
                    status.style.color = "var(--red)";
                    payStep.classList.remove('hidden');
                    driveStep.classList.add('hidden');
                }
            },

            pay: () => {
                // 1. Check if Internet is Active
                if (typeof PaystackPop === 'undefined') {
                    alert("Error: Internet connection required for payment.");
                    return;
                }

                alert("Initializing Payment Gateway...");

                // 2. Calculate Amount (Ensure it is a clean integer)
                const amountInKobo = Math.ceil(parseFloat(activeProj.price) * 100);

                // 3. Setup Paystack
                const handler = PaystackPop.setup({
                    key: KEY,
                    email: 'client@kitchestudios.com', // Generic email since we don't ask user
                    amount: amountInKobo,
                    currency: 'NGN',
                    ref: 'REF_' + Math.floor((Math.random() * 1000000000) + 1),
                    callback: function(response) {
                        // Payment Success
                        activeProj.paid = true;
                        activeProj.ref = response.reference;
                        activeProj.date = new Date().toLocaleDateString();
                        
                        Admin.save();
                        App.updateStatus();
                        App.showReceipt();
                    },
                    onClose: function() {
                        alert('Payment window closed.');
                    }
                });

                // 4. Open
                handler.openUI();
            },

            openDrive: () => {
                if(activeProj.link) window.open(activeProj.link, '_blank');
                else alert('No Link Provided. Contact Admin.');
            },

            showReceipt: () => {
                document.getElementById('rec-date').innerText = activeProj.date || 'Today';
                document.getElementById('rec-name').innerText = activeProj.name;
                document.getElementById('rec-ref').innerText = activeProj.ref || 'N/A';
                document.getElementById('rec-amount').innerText = '₦' + parseInt(activeProj.price).toLocaleString();
                document.getElementById('receipt-modal').style.display = 'flex';
            }
        };

        // --- ADMIN LOGIC ---
        const Admin = {
            open: () => document.getElementById('admin-panel').classList.add('open'),
            close: () => document.getElementById('admin-panel').classList.remove('open'),
            
            auth: () => {
                if(document.getElementById('admin-pass').value === 'admin') {
                    document.getElementById('admin-login-ui').classList.add('hidden');
                    document.getElementById('admin-main-ui').classList.remove('hidden');
                    Admin.render();
                } else alert('Wrong Password');
            },

            create: () => {
                const name = document.getElementById('new-name').value;
                const code = document.getElementById('new-code').value;
                let price = document.getElementById('new-price').value;
                const link = document.getElementById('new-link').value;

                if(!name || !code || !price) return alert('Fill all fields');

                // SANITIZE PRICE (Remove commas if user typed them)
                price = price.toString().replace(/,/g, '');

                const newP = {
                    id: Date.now(),
                    name, code, price, link, paid: false
                };
                
                projects.push(newP);
                Admin.save();
                
                // Reset Fields
                document.getElementById('new-name').value = '';
                document.getElementById('new-code').value = '';
                document.getElementById('new-price').value = '';
                document.getElementById('new-link').value = '';
                
                alert('Project Created');
                Admin.render();
            },

            save: () => localStorage.setItem(DB_NAME, JSON.stringify(projects)),

            del: (id) => {
                if(confirm('Delete?')) {
                    projects = projects.filter(p => p.id !== id);
                    Admin.save();
                    Admin.render();
                }
            },

            render: () => {
                const list = document.getElementById('project-list');
                list.innerHTML = projects.map(p => `
                    <div style="border-bottom:1px solid #333; padding:10px 0; display:flex; justify-content:space-between;">
                        <span class="mono" style="font-size:0.8rem; color:white;">${p.name}</span>
                        <span class="mono" style="color:red; cursor:pointer;" onclick="Admin.del(${p.id})">[X]</span>
                    </div>
                `).join('');
            }
        };
    </script>
</body>
</html>

